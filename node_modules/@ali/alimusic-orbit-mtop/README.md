# 定制版lib-mtop

## 基于lib-mtop(2.0.10) git@gitlab.alibaba-inc.com:mtb/lib-mtop.git
## 使用方法如下，在不同环境会自动切换使用h5或者windvane plugin调用方式

    var getMemberInfo = orbit.mtop.request({
        api: 'alimusic.uic.MemberService.getMemberInfo',
        v: '1.0', 
        data: JSON.stringify({
            model: '具体参数'
        }),
        type: 'GET',
        timeout: 20000,
        dataType: 'jsonp',
        ecode: 0
    });


## HACK内容
### orbit.mtop Release 0.1.1
2016-03-29
* 模块名修改为orbit.mtop

### lib.mtop Release 0.1.0
2016-03-04
* 阿里娱乐APP UA判断修正为AENT
2016-01-28
* 判断在天天娱乐app内之后才走windvane插件请求mtop
Release 0.0.1
2016-01-26
* 走windvane时，强制设置type为json而不是orginaljson
2016-01-22
* 浏览器中走json,jsonp请求时将platform参数修正为h5而不是web
2016-01-20
* 自动识别dongting.com域，调用dongting.com域上的MTOP API
* header中获取token字段的实现独立到token-in-header分支，现不采用该方案
2016-01-18
* 移除iframe解决方案，之后会用header中的token字段
2016-01-16
* 若h5模式下跨域调用mtop api，使用iframe获取token，因为无法跨域读取cookie中的token
* 修复问题:在无token情况下__fillMtopHeader会在重试逻辑中再次被调用
2016-01-15
* 如果通过windvane调用，抽取mtop数据和return code填充返回值，保持和h5调用时一致
* native环境下windvane调用失败不强制全局转换为h5模式发起调用
2016-01-14
* windvane环境下调用alimusicTtePlugin取代MtopWVPlugin
* h5环境下自动填充mtop header字段
