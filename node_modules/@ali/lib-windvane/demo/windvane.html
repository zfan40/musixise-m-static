<!DOCTYPE HTML>
<HTML>
<HEAD>
  <TITLE>WindVane Demo</TITLE>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="format-detection" content="telephone=no" />
  <!-- WindVane meta -->
  <meta id="WV.Meta.EnableLongPressEvent" value="true" />
  <meta id="WV.Meta.EnableInfiniteScroll" value="true" />
  <meta id="WV.Meta.DisableRefresh" value="true" />
  <meta id="WV.Meta.StopBounces" value="true" />
  <meta id="WV.Meta.Share.Title" value="WindVane" />
  <meta id="WV.Meta.Share.Image" value="http://h5.m.taobao.com/img/src/windvane/Logo.png" />
  <meta id="WV.Meta.Share.Targets" value="all" />
  <meta id="WV.Meta.Favorite.Summary" value="WindVane JSBridge Demo" />
  <meta id="WV.Meta.Favorite.Image" value="http://h5.m.taobao.com/img/src/windvane/Logo.png" />

  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="//h5.alibaba-inc.com/icons/apple-touch-icon-60x60-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="//h5.alibaba-inc.com/icons/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="//h5.alibaba-inc.com/icons/apple-touch-icon-76x76-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="//h5.alibaba-inc.com/icons/apple-touch-icon-114x114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="//h5.alibaba-inc.com/icons/apple-touch-icon-120x120-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//h5.alibaba-inc.com/icons/apple-touch-icon-144x144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="//h5.alibaba-inc.com/icons/apple-touch-icon-152x152-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="//h5.alibaba-inc.com/icons/apple-touch-icon-iphone-precomposed.png">
  <link rel="apple-touch-icon" href="//h5.alibaba-inc.com/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="//h5.alibaba-inc.com/icons/favicon-16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="//h5.alibaba-inc.com/icons/favicon-32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="//h5.alibaba-inc.com/icons/favicon-48.png" sizes="48x48">
  <link rel="icon" type="image/png" href="//h5.alibaba-inc.com/icons/favicon-64.png" sizes="64x64">
  <link rel="icon" type="image/png" href="//h5.alibaba-inc.com/icons/favicon-128.png" sizes="128x128">
  <!-- Bootstrap -->
  <link rel="stylesheet" href="//h5.m.taobao.com/css/src/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="//h5.m.taobao.com/js/src/jquery/jquery-2.1.4.min.js"></script>
  <!-- WindVane -->
  <script>
    var wvJS = location.href.match(/_wvjs=(.+)(&|$)/);
    if (wvJS) {
      wvJS = decodeURIComponent(wvJS[1]);
    } else {
      wvJS = 'http://g.tbcdn.cn/mtb/lib-windvane/2.1.4/windvane.debug.js';
    }
    document.write('<scr' + 'ipt src="' + wvJS + '"></scr' + 'ipt>');
  </script>
  <!--<script src="http://100.67.1.96/g/mtb/lib-windvane/2.1.5/windvane.debug.js"></script>-->
  <!-- WindVane Demo -->
  <link rel="stylesheet" href="//h5.m.taobao.com/css/src/lianyu/windvane/demo.css">
  <script src="//h5.m.taobao.com/js/src/lianyu/windvane/demo.js"></script>
  <script src="//h5.m.taobao.com/js/src/lianyu/windvane/dynamicButton.js"></script>
  <script src="//h5.m.taobao.com/js/src/lianyu/windvane/JSBridgeAPI.js"></script>
  <style type="text/css">
    .jstree-container {
      margin-left: -7px;
    }
  </style>
</HEAD>
<BODY>
<script type="text/javascript">
  $(function() {
    // 初始化。
    initWindVaneDemo({
      title: 'WindVane JSBridge Demo',
      nav: [
        'Config Debug',
        'PackageApp Debug',
        {
          name: '自动测试',
          action: function() {
            if (confirm('确认进行自动测试？自动测试只会检查是否进入成功回调，不会对结果进行校验，功能仍需手动回归。')) {
              window.doAutoTest();
            }
          },
        },
      ],
      tab: [
        { label:'WV API', hash: 'windvane' },
        { label:'手淘 API', hash: 'taobao' },
        { label:'开发工具', hash: 'develop' },
      ],
    });
    // 添加查看源代码功能。
    var viewSourceBtn = $('<button type="button" class="btn btn-default btn-xs" data-toggle="button" style="float: right; margin-top: 10px; margin-right: 10px;"><img src="//h5.m.taobao.com/img/src/lianyu/windvane/SourceCode.png" style="height: 8px;"></button>');
    $('.nav-tabs').append(viewSourceBtn);
    viewSourceBtn.on('click', function() {
      window.DynamicButton.viewSourceMode = !window.DynamicButton.viewSourceMode;
      if (window.DynamicButton.viewSourceMode) {
        window.WindVane.call('WVUIToast', 'toast', '进入查看源码模式');
      } else {
        window.WindVane.call('WVUIToast', 'toast', '退出查看源码模式');
      }
    });
    if (window.location.href.indexOf('view-source=true') > 0) {
      window.DynamicButton.viewSourceMode = true;
      viewSourceBtn.button('toggle');
    }
  });
</script>
<script type="text/javascript">
  ;!(function($) {
    var autoTestCases, autoTestTotalCount, autoTestCallCount, failedTests;
    // 执行自动测试。
    window.doAutoTest = function() {
      autoTestCases = $.merge(
        $.merge(
          window.DynamicButton.generateTestCase(window.WindVaneAPI, true),
          window.DynamicButton.generateTestCase(window.TaobaoAPI, true)
        ),
        window.WindVaneJSBridge.externalTestCases
      );
      autoTestTotalCount = autoTestCases.length;
      autoTestCallCount = 0;
      failedTests = [];
      runAutoTest();
    };
    var TEST_INTERVAL = 100;
    // 执行自动测试。
    window.runAutoTest = function() {
      if (autoTestCases.length > 0) {
        var testCase = autoTestCases.shift();
        var sepIdx = testCase.apiName.indexOf('.');
        window.WindVane.call(testCase.apiName.substr(0, sepIdx), testCase.apiName.substr(sepIdx + 1), testCase.params, function(e) {
          if (testCase.resultChecker) {
            var result = testCase.resultChecker(e);
            if (result) {
              testCase.externalInfo = result + ':';
              testCase.info = JSON.stringify(e);
              failedTests.push(testCase);
            }
          }
          autoTestCallCount++;
          window.info(testCase.apiName, autoTestCallCount + '/' + autoTestTotalCount);
          if (autoTestCallCount == autoTestTotalCount) {
            finishAutoTest();
          }
        }, function(e) {
          autoTestCallCount++;
          window.info(testCase.apiName, autoTestCallCount + '/' + autoTestTotalCount);
          testCase.info = JSON.stringify(e);
          failedTests.push(testCase);
          if (autoTestCallCount == autoTestTotalCount) {
            finishAutoTest();
          }
        }, 10 * 1000);
        setTimeout('window.runAutoTest()', TEST_INTERVAL);
      }
    }
    // 自动测试结束。
    function finishAutoTest() {
      window.info('自动测试 ' + autoTestTotalCount + ' 个用例，成功 ' + (autoTestTotalCount - failedTests.length) + ' 个，失败 ' + failedTests.length + ' 个', '自动测试完毕');
      // 填充失败测试。
      if (failedTests.length > 0) {
        var failGroup = { groupName: '失败测试', buttons: failedTests };
        window.WindVaneAPI.push(failGroup);
        window.failure('失败 API:', true);
        failedTests.forEach(function(info) {
          if (info.externalInfo) {
            window.info(info.externalInfo, undefined, true);
          }
          window.info(info.info, info.apiName, true);
        });
      }
      window.DynamicButton.empty($('#windvane'));
      window.DynamicButton.empty($('#taobao'));
      window.DynamicButton.appendGroup($('#windvane'), window.WindVaneAPI);
      window.DynamicButton.appendGroup($('#taobao'), window.TaobaoAPI);
    }
  })(jQuery);
</script>
<!-- Demo 内容 开始 -->
<div class="tab-content">
  <!-- WindVane API -->
  <div id="windvane" class="tab-pane active list-group">
  </div>
  <script type="text/javascript">
    $(function() {
      window.WindVaneAPI = [
        {
          groupName: '基础 Base',
          buttons: [
            // href
            {
              label: 'href',
              JSAction: function() {
                info(window.location.href);
              },
            },
            // userAgent
            {
              label: 'userAgent',
              JSAction: function() {
                info(window.navigator.userAgent);
              },
            },
            'Base.checkWindVaneSDK',
            'Base.copyToClipboard',
            'WVStandardEventCenter.postNotificationToNative',
            'Base.isInstall',
            'Base.isWindVaneSDK',
            'Base.notify',
            'Base.plusUT',
            'Base.commitUTEvent',
            'Base.openBrowser',
            'Base.setBackgroundColor',
          ]
        },
        {
          groupName: '声音播放 WVAudio',
          buttons: [
            'WVAudio.playSystemSound',
          ]
        },
        {
          groupName: '相机 WVCamera',
          buttons: [
            {
              extend: 'WVCamera.takePhoto',
              options: [
                {
                  type: 'checkbox',
                  items: [
                    { label: '线上地址', key: 'useResourceURL', external: true },
                    { label: '缩放 100%', key: 'fullImage', external: true },
                  ]
                },
              ],
              success: function(params, external, e) {
                success(JSON.stringify(e), true);
                if (!external.useResourceURL && e.url) {
                  WVCamera_localPath = e.localPath;
                  info(e.url, external.fullImage, true);
                } else if (external.useResourceURL && e.resourceURL) {
                  WVCamera_localPath = e.localPath;
                  info(e.resourceURL, external.fullImage, true);
                } else if (e.images) {
                  for (var i in e.images) {
                    if (external.useResourceURL) {
                      info(e.images[i].resourceURL, external.fullImage, true);
                    } else {
                      info(e.images[i].url, external.fullImage, true);
                    }
                  }
                }
              },
            },
            'WVCamera.confirmUploadPhoto',
          ]
        },
        {
          groupName: '通讯录 WVContacts',
          buttons: [
            'WVContacts.askAuth',
            'WVContacts.authStatus',
            'WVContacts.choose',
            'WVContacts.find',
          ],
        },
        {
          groupName: '跨域Cookie WVCookie',
          buttons: [
            'WVCookie.read',
            'WVCookie.write',
          ],
        },
        {
          groupName: '地理位置 WVLocation',
          buttons: [
            'WVLocation.getLocation',
            'WVLocation.searchLocation',
          ],
        },
        {
          groupName: '动作检测 WVMotion',
          buttons: [
            'WVMotion.listenBlow',
            'WVMotion.stopListenBlow',
            'WVMotion.listenGyro',
            'WVMotion.listeningShake',
            'WVMotion.vibrate',
          ],
        },
        {
          groupName: '网络检测 WVNetwork',
          buttons: [
            'WVNetwork.getNetworkType',
          ],
        },
        {
          groupName: '蜂鸣 WVNotification',
          buttons: [
            'WVNotification.beep',
          ],
        },
        {
          groupName: '截屏 WVScreen',
          buttons: [
            'WVScreen.capture',
          ],
        },
        {
          groupName: '文件 WVFile',
          buttons: [
            'WVFile.read',
            'WVFile.write',
          ],
        },
        {
          groupName: '本地检测 WVNativeDetector',
          buttons: [
            'WVNativeDetector.getModelInfo',
            'WVNativeDetector.getDeviceYear',
            'WVNativeDetector.isHighPerformanceDevice',
          ],
        },
        {
          groupName: '窗口小部件 Widget',
          buttons: [
            'WVUIActionSheet.show',
            // 原生 alert
            {
              label: '原生alert',
              JSAction: function() {
                alert('原生alert');
              }
            },
            'WVUIDialog.alert',
            'WVUIDialog.confirm',
            'WVUI.showLoadingBox',
            'WVUI.hideLoadingBox',
            'WVUIToast.toast',
          ],
        },
      ];
      window.DynamicButton.appendGroup($('#windvane'), window.WindVaneAPI);
    });
  </script>
  <!-- 手淘专有 API -->
  <div id="taobao" class="tab-pane list-group">
  </div>
  <script type="text/javascript">
    $(function() {
      window.TaobaoAPI = [
        {
          groupName: '基础 Base',
          buttons: [
            // forceH5
            {
              label: 'forceH5',
              JSAction: function() {
                window.location = '//detail.tmall.com/item.htm?id=5812615791&hybrid=true&forceAllH5=true';
              },
            },
            {
              label: '跳转到天猫店铺',
              JSAction: function() {
                window.location = '//xinyuke.tmall.com';
              },
            },
            // Base.openWindow
            {
              label: 'openDemoWindow',
              noAutoTest: true,
              apiName: 'Base.openWindow',
              params: { url: '//wapp.waptest.taobao.com/wv/windvane.html' },
            },
            'Base.openWindow',
          ]
        },
        {
          groupName: '音频播放 H5AudioPlayer',
          buttons: [
            'H5AudioPlayer.play',
            'H5AudioPlayer.stop',
          ]
        },
        {
          groupName: 'Mtop请求 MtopWVPlugin',
          buttons: [
            'MtopWVPlugin.send',
          ]
        },
        {
          groupName: '安全保镖 SecurityGuard',
          buttons: [
            'SecurityGuard.getEncryptedDevAndEnvInfo',
          ]
        },
        {
          groupName: '扫码 Scancode',
          buttons: [
            'Scancode.scan',
          ]
        },
        {
          groupName: '手淘基础 TBBase',
          buttons: [
            'TBBase.getEnvironment',
            'TBBase.getNetworkStatus',
          ]
        },
        {
          groupName: '设备信息 TBDeviceInfo',
          buttons: [
            'TBDeviceInfo.getInfo',
            'TBDeviceInfo.getModelInfo',
            'TBDeviceInfo.getUtdid',
          ]
        },
        {
          groupName: '分享 TBSharedModule',
          buttons: [
            'TBSharedModule.showSharedMenu',
            'TBSharedModule.copyPassword',
          ]
        },
        {
          groupName: '网络缓存 TBURLCache',
          buttons: [
            'TBURLCache.clean',
          ]
        },
        {
          groupName: '弱网络状态 TBWeakNetStatus',
          buttons: [
            'TBWeakNetStatus.getStatus',
          ]
        },
        {
          groupName: '图片URL解析 TBWVImageURLParser',
          buttons: [
            'TBWVImageURLParser.parse',
          ]
        },
        {
          groupName: '手淘相机 WVCamera',
          buttons: [
            {
              extend: 'WVCamera.takePhotoPlus',
              options: [
                {
                  type: 'checkbox',
                  items: [
                    { label: '线上地址', key: 'useResourceURL', external: true },
                    { label: '缩放 100%', key: 'fullImage', external: true },
                  ]
                },
              ],
              success: function(params, external, e) {
                success(JSON.stringify(e), true);
                if (!external.useResourceURL && e.url) {
                  WVCamera_localPath = e.localPath;
                  info(e.url, external.fullImage, true);
                } else if (external.useResourceURL && e.resourceURL) {
                  WVCamera_localPath = e.localPath;
                  info(e.resourceURL, external.fullImage, true);
                } else if (e.images) {
                  for (var i in e.images) {
                    if (external.useResourceURL) {
                      info(e.images[i].resourceURL, external.fullImage, true);
                    } else {
                      info(e.images[i].url, external.fullImage, true);
                    }
                  }
                }
              },
            },
          ],
        },
        {
          groupName: '互动相机 WVInteractsdkCamera',
          buttons: [
            {
              extend: 'WVInteractsdkCamera.takePhotoInteract',
              options: [
                {
                  type: 'checkbox',
                  items: [
                    { label: '线上地址', key: 'useResourceURL', external: true },
                    { label: '缩放 100%', key: 'fullImage', external: true },
                  ]
                },
              ],
              success: function(params, external, e) {
                success(JSON.stringify(e), true);
                if (!external.useResourceURL && e.url) {
                  WVCamera_localPath = e.localPath;
                  info(e.url, external.fullImage, true);
                } else if (external.useResourceURL && e.resourceURL) {
                  WVCamera_localPath = e.localPath;
                  info(e.resourceURL, external.fullImage, true);
                } else if (e.images) {
                  for (var i in e.images) {
                    if (external.useResourceURL) {
                      info(e.images[i].resourceURL, external.fullImage, true);
                    } else {
                      info(e.images[i].url, external.fullImage, true);
                    }
                  }
                }
              },
            },
          ]
        },
        {
          groupName: '本地配置 WVLocalConfig',
          buttons: [
            'WVLocalConfig.write',
          ]
        },
        {
          groupName: '客户端 WVNative',
          buttons: [
            'WVNative.nativeBack',
          ]
        },
        {
          groupName: '定位 WVTBLocation',
          buttons: [
            'WVTBLocation.getCachedLocation',
            'WVTBLocation.getCachedCity',
          ]
        },
        {
          groupName: '城市列表 WVUICityList',
          buttons: [
            'WVUICityList.showCityList',
          ]
        },
        {
          groupName: '浮动栏 WVUIFlowBar',
          buttons: [
            'WVUIFlowBar.showTabBar',
            'WVUIFlowBar.hiddenTabBar',
          ]
        },
        {
          groupName: '大图浏览 WVUIImagepreview',
          buttons: [
            'WVUIImagepreview.showImagepreview',
            {
              apiName: 'WVUIImagepreview.showImagepreview',
              label: 'showImagepreview（多图）',
              noAutoTest: true,
              options: [ {
                type: 'select',
                key: 'index',
                label: 'index',
                items: [ '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12' ]
              } ],
              params: {
                images: [
                  'http://gw2.alicdn.com/tfscom/tuitui/T1.4CbFrpcXXXXXXXX',
                  'http://img06.taobaocdn.com/consult/i6/TB1w53wHXXXXXboXFXXSutbFXXX_500x800.jpg',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1_x9rFx0bXXXXXXXX',
                  'http://gw1.alicdn.com/tfscom/tuitui/T1qCqmFyxbXXXXXXXX',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1iVipFq0aXXXXXXXX',
                  'http://gw.alicdn.com/bao/uploaded/i2/T114R6FpxcXXXXXXXX_!!0-item_pic.jpg',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1.4CbFrpcXXXXXXXX',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1_x9rFx0bXXXXXXXX',
                  'http://gw1.alicdn.com/tfscom/tuitui/T1qCqmFyxbXXXXXXXX',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1iVipFq0aXXXXXXXX',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1.4CbFrpcXXXXXXXX',
                  'http://gw2.alicdn.com/tfscom/tuitui/T1_x9rFx0bXXXXXXXX',
                  'http://gw1.alicdn.com/tfscom/tuitui/T1qCqmFyxbXXXXXXXX',
                ],
              },
            },
            'WVUIImagepreview.showVerticalImagepreview',
          ]
        },
        {
          groupName: '客户端 WVClient',
          buttons: [
            'WVClient.open',
          ],
        },
        {
          groupName: '视频拍摄 TBWVVideoManager',
          buttons: [
            'TBWVVideoManager.takeVideoAndUpload',
          ]
        },
        {
          groupName: '语音识别 TBSearchVoice',
          buttons: [
            'TBSearchVoice.startVoiceRecognition',
            'TBSearchVoice.stopVoiceRecognition',
            'TBSearchVoice.cancelVoiceRecognition',
          ]
        },
        {
          groupName: '应用接口 WebAppInterface',
          buttons: [
            'WebAppInterface.addShortcutToDesktop',
            'WebAppInterface.enableStatusBarClicked',
            'WebAppInterface.forbidPanGesture',
            'WebAppInterface.pop',
            'WebAppInterface.setNaviBarHidden',
            'WebAppInterface.setCustomPageTitle',
            'WebAppInterface.setNaviBarRightItem',
            'WebAppInterface.clearNaviBarRightItem',
            'WebAppInterface.updateBadgeText',
            'WebAppInterface.updateBadgeTextWithPrice',
            'WebAppInterface.setNaviBarMoreItem',
            'WebAppInterface.clearNaviBarMoreItem',
            'WebAppInterface.hideNaviBarDefaultMoreItem',
            'WebAppInterface.setFestivalStyle',
            'WebAppInterface.setShortcutToDesktop',
            'WebAppInterface.clearShortcutToDesktop',
            'WebAppInterface.transverseFullScreen',
            'WebAppInterface.setPageUserInfo',
          ]
        },
        {
          groupName: '其它 Other',
          buttons: [
            // 截获手淘 WebView 的 Native Back 事件
            {
              label: '拦截 Native Back',
              JSAction: function() {
                isHookNativeBack = !isHookNativeBack;
              },
            },
          ]
        },
      ];
      window.DynamicButton.appendGroup($('#taobao'), window.TaobaoAPI);
    });
  </script>
  <!-- 开发工具 -->
  <div id="develop" class="tab-pane list-group">
    <!-- 警告 -->
    <div class="list-group-item">
      <div class="alert alert-danger" style="margin-bottom: 0;padding: 5px;" role="alert">开发工具中用到的任何 JSBridge 都仅用于本页面，<b>不允许自行使用，特别是在线上页面！！</b></div>
    </div>
    <!-- 系统状态 -->
    <div class="list-group-item">
      <table id="systemStatus" class="table table-striped">
        <tr><td>开关</td><td><button id="systemDebug" type="button" class="btn btn-default btn-xs">一键调试</button></td></tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    // 创建开发工具。
    $(function() {
      // 版本兼容。
      var developToolMethod = ['WVDevelopTool', 'isSPDYDemote', 'setSPDYDemote'];
      if (window.isAndroid) {
        // Android WindVane 版本 < 6.4.0
        if (windVaneVersion[0] < '6' || (windVaneVersion[0] == '6' && windVaneVersion[2] < '4')) {
          developToolMethod = ['WVDevelopTool', 'isDemoteSPDY', 'demoteSPDY'];
        }
      } else {
        // iOS WindVane 版本 < 5.6.0
        if (windVaneVersion[0] < '5' || (windVaneVersion[0] == '5' && windVaneVersion[2] < '6')) {
          if (window.navigator.userAgent.indexOf("TBIOS")>=0) {
            // 手淘
            developToolMethod = ['DevelopTool', 'isDemoteSPDY', 'demoteSPDY'];
          } else {
            // 其它
            developToolMethod = ['WVDevelopTool', 'isDemoteSPDY', 'demoteSPDY'];
          }
        }
      }
      var systemStatus = [
        // DNS 降级
        {
          label: 'DNS',
          reversed: true,
          className: 'WVDevelopTool',
          platform: 'iOS',
          isEnabledMethodName: 'isDNSDemote',
          isEnabledParamName: 'demote',
          setEnabledMethodName: 'setDNSDemote',
          setEnabledParamName: 'demote',
        },
        // SPDY 降级
        {
          label: 'SPDY',
          reversed: true,
          className: developToolMethod[0],
          isEnabledMethodName: developToolMethod[1],
          isEnabledParamName: 'demote',
          setEnabledMethodName: developToolMethod[2],
          setEnabledParamName: 'demote',
        },
        // ACCS 控制
        {
          label: 'ACCS',
          className: 'WVDevelopTool',
          isEnabledMethodName: 'isACCSEnabled',
          isEnabledParamName: 'enabled',
          setEnabledMethodName: 'setACCSEnabled',
          setEnabledParamName: 'enable',
        },
        // https 控制
        {
          label: 'https',
          className: 'WVDevelopTool',
          isEnabledMethodName: 'isHTTPSEnabled',
          isEnabledParamName: 'enabled',
          setEnabledMethodName: 'setHTTPSEnabled',
          setEnabledParamName: 'enable',
        },
        // Tunnel 建连控制
        {
          label: '代理模式 Tunnel 建连控制',
          className: 'WVDevelopTool',
          platform: 'iOS',
          isEnabledMethodName: 'isUseTunnel',
          isEnabledParamName: 'enabled',
          setEnabledMethodName: 'setUseTunnel',
          setEnabledParamName: 'enable',
        },
        // UCSDK 控制
        {
          label: 'UC',
          className: 'WVDevelopTool',
          platform: 'Android',
          isEnabledMethodName: 'isUCEnabled',
          isEnabledParamName: 'enabled',
          setEnabledMethodName: 'setUCEnabled',
          setEnabledParamName: 'enable',
        },
        // Package App 控制
        {
          label: 'Package App',
          className: 'WVDevelopTool',
          isEnabledMethodName: 'isPackageAppEnabled',
          isEnabledParamName: 'enabled',
          setEnabledMethodName: 'setPackageAppEnabled',
          setEnabledParamName: 'enable',
        },
        // WindVane 调试模式控制
        {
          label: 'WindVane 本地性能数据',
          debugMode: true,
          className: 'WVDevelopTool',
          isEnabledMethodName: 'isDebugEnabled',
          isEnabledParamName: 'locPerf',
          setEnabledMethodName: 'setDebugEnabled',
          setEnabledParamName: 'locPerf',
        },
        {
          label: 'WindVane 日志',
          debugMode: true,
          className: 'WVDevelopTool',
          isEnabledMethodName: 'isDebugEnabled',
          isEnabledParamName: 'logLevel',
          setEnabledMethodName: 'setDebugEnabled',
          setEnabledParamName: 'logLevel',
          enabledValue: 5,
        },
      ];
      var systemStatusTable = $('#systemStatus');
      var systemStatusInfo = [];
      // 创建开关按钮
      systemStatus.forEach(function(data) {
        if (!window.checkPlatform(data.platform)) {
          return;
        }
        var button = $('<button type="button" data-toggle="button" class="btn btn-default btn-xs">未知</button>');
        var row = $('<tr><td>' + data.label + '</td><td></td></tr>');
        $(row.find('td')[1]).append(button);
        systemStatusTable.append(row);
        button.attr('disabled', 'disabled');
        var enabled;
        var isEnabled = function() {
          if (data.reversed) {
            return !enabled;
          } else {
            return enabled;
          }
        };
        window.WindVane.call(data.className, data.isEnabledMethodName, {}, function(e) {
          enabled = (e[data.isEnabledParamName] != 'false' && e[data.isEnabledParamName] != false);
          button.removeAttr('disabled');
          if (isEnabled()) {
            button.text('已启用');
            button.button('toggle');
          } else {
            button.text('已禁用');
          }
          // Android 下关闭 SPDY 会重启，容易被人误解为 Crash，先停掉。
          if (!window.isAndroid || data.label != 'SPDY') {
            systemStatusInfo.push({ button: button, isEnabled:isEnabled, debugMode: data.debugMode });
          }
          button.on('click', function() {
            var params = {};
            var paramValue = !enabled;
            if (paramValue && data.enabledValue) {
              paramValue = data.enabledValue;
            }
            params[data.setEnabledParamName] = paramValue;
            window.WindVane.call(data.className, data.setEnabledMethodName, params, function() {
              enabled = !enabled;
              if (isEnabled()) {
                button.text('已启用');
              } else {
                button.text('已禁用');
              }
            }, function(e) {
              button.button('toggle');
              failure(JSON.stringify(e));
            });
          });
        });
      });
      $('#systemDebug').on('click', function() {
        systemStatusInfo.forEach(function(item) {
          if (item.isEnabled()) {
            if (!item.debugMode) {
              item.button.click();
            }
          } else if (item.debugMode) {
            item.button.click();
          }
        });
      });
      // 开发工具。
      var Develop = [
        {
          groupName: '开发工具 WVDevelopTool',
          buttons: [
            // Android WebView 调试控制按钮。
            {
              label: 'WebView 调试',
              platform: 'Android',
              apiName: 'WVDevelopTool.setWebViewDebugEnabled',
              params: { enabled: true },
            },
            // 清除 WindVane 缓存。
            {
              label: '清除 WindVane 缓存',
              apiName: 'WVDevelopTool.clearWindVaneCache',
            },
            // setWebViewFinishJs
            {
              apiName: 'WVDevelopTool.setWebViewFinishJs',
              params: { js: 'alert("hello")' },
            },
            // clearWebViewFinishJs
            { apiName: 'WVDevelopTool.clearWebViewFinishJs' },
            {
              apiName: 'WVDevelopTool.configCenterData',
            },
            // getLocPerformanceData
            {
              label: '获取本地性能数据',
              platform: 'iOS',
              apiName: 'WVDevelopTool.getLocPerformanceData',
            },
          ]
        },
        {
          groupName: 'PackageApp 信息',
          buttons: [
            'WVPackageAppInfo.localPathForURL',
            'WVPackageAppInfo.registerApp',
          ],
        },
      ];
      window.DynamicButton.appendGroup($('#develop'), Develop);
    });
  </script>
</div>
<!-- Demo 内容 结束 -->
</BODY>
</HTML>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="//h5.m.taobao.com/js/src/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript">
  // 应用切换后台事件
  document.addEventListener('WV.Event.APP.Background', function(e) {
    // 一些机型退出时弹 alert 会出问题。
    info(e.param.to, 'WV.Event.APP.Background', true);
  }, false);
  // 应用激活事件
  document.addEventListener('WV.Event.APP.Active', function(e) {
    var message = 'Active';
    if (e.param.from) {
      message += ' from ' + e.param.from + ' data: ' + e.param.data;
    }
    window.WindVane.call('WVUIToast', 'toast', message);
  }, false);
  // 从其它 WebView 切换回来
  document.addEventListener('WindVane.fromWebViewPop', function(e) {
    window.WindVane.call('WVUIToast', 'toast', 'WindVane.fromWebViewPop');
  });
  // 无限滚动
  document.addEventListener('WV.Event.Page.InfiniteScroll', function(e) {
    window.WindVane.call('WVScrollWidget', 'hideInfiniteScroll', {}, function(e) {
      var img = document.createElement('img');
      img.setAttribute('src', '//img03.taobaocdn.com/tfscom/TB1YfFqHFXXXXaOXXXXxKNpFXXX');
      img.setAttribute('class', 'img-rounded img-responsive');
      document.body.appendChild(img);
    });
  }, false);
  // 手淘 Native Back
  window.WindVane.call('WebAppInterface', 'enableHookNativeBack', {});
  isHookNativeBack = false;
  function _windvane_backControl() {
    // 返回 'true' 即可拦截手淘的 Native Back
    return isHookNativeBack?'true':'false';
  }
  document.addEventListener('wvBackClickEvent', function(e) {
    alert('Native Back');
    window.WindVane.call('WebAppInterface', 'pop');
  }, false);
  document.addEventListener('WV.Event.Key.Back', function(e) {
    info('', 'WV.Event.Key.Back', 'AnyGroup');
  }, false);
</script>