function camera_previewAndUploadPhoto() {
    var p = {
        'type' : '0'
    };

    window.WindVane.call('WVCamera', 'takePhoto', p, function(e){
        printlog('takePhoto.success:' + JSON.stringify(e));
        var p = {
            path: e.localPath
        }
        window.WindVane.call('WVCamera', 'confirmUploadPhoto', p, function(e){
            printlog('confirmUploadPhoto.success:' + JSON.stringify(e));
        }, function(e){
            printlog('confirmUploadPhoto.failue:' + JSON.stringify(e));
        })

    }, function(e){
        printlog('takePhone.failed:' + JSON.stringify(e));
    });

	document.addEventListener('WVPhoto.Event.takePhotoSuccess', function (e) {
	    printlog('Event.takePhotoSuccess');
	    document.removeEventListener('WVPhoto.Event.takePhotoSuccess', arguments.callee);
	}, false);

	document.addEventListener('WVPhoto.Event.prepareUploadPhotoSuccess', function (e) {
	    printlog('Event.prepareUploadPhotoSuccess');
	    document.removeEventListener('WVPhoto.Event.prepareUploadPhotoSuccess', arguments.callee);
	}, false);
}

function camera_takeAndUploadPhoto() {
    var p = {
        'type' : '1'
    };

    window.WindVane.call('WVCamera', 'takePhoto', p, function(e){
        printlog('takePhoto.success:' + JSON.stringify(e));
    }, function(e){
        printlog('takePhone.failed:' + JSON.stringify(e));
    });

    document.addEventListener('WVPhoto.Event.takePhotoSuccess', function (e) {
        printlog('Event.takePhotoSuccess');
        document.removeEventListener('WVPhoto.Event.takePhotoSuccess', arguments.callee);
    }, false);

    document.addEventListener('WVPhoto.Event.prepareUploadPhotoSuccess', function (e) {
        printlog('Event.prepareUploadPhotoSuccess');
        document.removeEventListener('WVPhoto.Event.prepareUploadPhotoSuccess', arguments.callee);
    }, false);
}