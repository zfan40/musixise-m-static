!function(a,b){function c(a){a=a.split(".");for(var b,c,d=0;d<s.length;d++){if(b=parseInt(a[d],10)||0,c=parseInt(s[d],10)||0,b>c)return 1;if(c>b)return-1}return 0}function d(a){return"string"==typeof a}function e(a){return"number"==typeof a}function f(a){return"function"==typeof a}function g(a,b,c,d,e){a=a.split(".");var f=a[0],g=a[1];o&&o.call(f,g,b,c,d,e)}function h(a,b){return(a||b)&&function(c){c=b&&b(c)||c,a&&a(j(c))}}function i(a){return a&&function(b){a(k(b))}}function j(a){return a=a||{},a.errorCode=0,a.errorMessage="",a}function k(a){var b=6,c=d(a)?a:a.ret;if(a){var e=u.indexOf(c);b=e>0?e:b}return{errorCode:b,errorMessage:c,data:a}}var l,m,n=a.navigator.userAgent;if((l=n.match(/AliApp\(TB\/([\d\.]+)\)/))?m=l[1]:(l=n.match(/@([^_@]+)_(iphone|android|ipad|apad)_([\d\.]+)/))&&(m=l[3]),m||n.match(/WindVane[\/\s]([\d\.\_]+)/)){var o=b.windvane,p=document,q=/iPhone|iPad|iPod/i.test(n),r=/Android/i.test(n),s=n.match(/WindVane[\/\s](\d+)[._](\d+)[._](\d+)/i),s=s?s.slice(1,4):[0,0,0],t=location.host.match(/waptest|wapa/i),t=t&&t[0]||"m",u=["HY_SUCCESS","HY_NO_HANDLER","HY_PARAM_ERR","HY_UNKNOWN_ERR","HY_NO_PERMISSION","HY_TIMEOUT","HY_FAILED","HY_CLOSED"],v=0,w={},x="_HA_Loading",y=a.Ali=b.Ali={appinfo:{name:"taobao",ver:m||"0.0.0",engine:"windvane",engineVer:s.join(".")},toast:function(a,b){var c=d(a)?a:a&&a.text;g("TBDeviceInfo.showServiceMsg",{serviceMsg:c},h(b),i(b))},setTitle:function(a,b){var c=d(a)?a:a&&a.text,e=r?{title:c}:c;p.title=c,g("WebAppInterface.setCustomPageTitle",e,h(b),i(b)),b&&b(j(null))},showTitle:function(a){var b=p.title,c=r?{title:b}:b;g("WebAppInterface.setCustomPageTitle",c,h(a),i(a)),a&&a(j(null))},hideTitle:function(a){var b=" ",c=r?{title:b}:b;g("WebAppInterface.setCustomPageTitle",c,h(a),i(a)),a&&a(j(null))},pushWindow:function(a,b){var e=d(a)?a:a&&a.url;q&&c("4.5.0")>=0?g("Base.openWindow",{url:e},h(b),i(b)):location.href=e,b&&b(j(null))},popWindow:function(a){window.history.back(),a&&a(j(null))},login:function(a){if(!b.login)throw new Error("lib.login required");b.login.goLogin(),a&&a(j(null))},h5TradePay:function(a,b){var c="http://d."+t+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var d in a)c+="&"+d+"="+encodeURIComponent(a[d]);location.href=c,b&&b(j({payUrl:c}))},geolocation:{getCurrentPosition:function(a,b){a=a||{enableHighAcuracy:!0,address:!0},g("WVLocation.getLocation",a,h(b,function(a){var b=a.address,c=a.coords;b&&"object"==typeof b&&(a.city=b.city,a.cityCode=b.cityCode,a.province=b.province,a.address=b.addressLine),c&&(c.longitude=parseFloat(c.longitude),c.latitude=parseFloat(c.latitude),c.accuracy=parseFloat(c.accuracy))}),i(b))}},shake:{watch:function(a,b){var c=++v;return w[c]=b,g("WVMotion.listeningShake",{on:!0},h(function(a){a&&a.ret===u[0]?p.addEventListener("motion.shake",b,!1):b(a)}),i(b)),c},clearWatch:function(a,b){var c=w[a];f(c)&&p.removeEventListener("motion.shake",c,!1),g("WVMotion.listeningShake",{on:!1},h(b),i(b))}},vibration:{vibrate:function(a,b){a=e(a)?{duration:a}:a,g("WVMotion.vibrate",a,h(b),i(b))}},network:{getType:function(a){g("TBDeviceInfo.getInfo","",h(a,function(a){var b=a.network||"",c={type:b,isWifi:!1,is2G:!1,is3G:!1,isOnline:!1};return/WIFI/i.test(b)?c.isWifi=c.isOnline=!0:/GPRS|EDGE|CDMA/i.test(b)?c.is2G=c.isOnline=!0:/UMTS|HSDPA|EVDO/i.test(b)&&(c.is3G=c.isOnline=!0),c.isE=c.isG=c.isH=!1,c.networkAvailable=null!=b&&""!=b,c}),i(a))}},audio:{play:function(a,b){var c=d(a)?a:a&&a.url;g("H5AudioPlayer.play",{voiceUrl:c},h(b),i(b))},stop:function(a,b){g("H5AudioPlayer.stop",null,h(b),i(b))}},calendar:{add:function(a,b){a=a||{},a.eventId||(a.eventId=+new Date);var c=a.startDate,d=a.endDate,e=/[- :]/g;c&&(a.startTime=c.replace(e,""),a.endTime=d.replace(e,""),delete a.startDate,delete a.endDate);var f="http://m.taobao.com/go/CalendarMyPlan",g="";for(var h in a)g+=(g?"&":"")+h+"="+a[h];f=f+"?"+g,location.href=f,b&&b(j(null))}},photo:function(a,b){a=a||{},a.type="1",g("WVCamera.takePhoto",a,h(b,function(a){a.photo=a.resourceURL}),i(b))},contacts:{get:function(a,b){g("WVContacts.choose",null,h(b,function(a){var b=[{name:a.name,phoneNumber:a.phone,email:a.email}];return a.results=b,a}),i(b))}},showLoading:function(a,b){var c=p.getElementById(x);if(c)c.style.display="block";else{var d=p.createElement("div");d.id=x,d.style.cssText="position:absolute;width:100%;height:100%;left:0;top:0;background:url(//assets.alicdn.com/mw/base/styles/component/more/images/loading.gif) 50% 50% no-repeat;background-size:40px 16px;pointer-events:none;",c=p.createDocumentFragment(),c.appendChild(d)}p.body.appendChild(c),b&&b(j(null))},hideLoading:function(a){var b=p.getElementById(x);b&&(b.style.display="none"),a&&a(j(null))}},z=navigator.geolocation||(navigator.geolocation={});z.getCurrentPosition||(z.getCurrentPosition=y.geolocation.getCurrentPosition)}}(window,window.lib||(window.lib={}));